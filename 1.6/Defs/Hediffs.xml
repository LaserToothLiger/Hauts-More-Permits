<?xml version="1.0" encoding="utf-8" ?>
<Defs>
  
  <!--Ghouls that get downed and then regenerate just... stick around indefinitely. We need them to leave.-->
  <HediffDef ParentName="HVT_TraitHediffBase">
	<defName>HVMP_KickForAFK</defName>
	<label>eviction notice</label>
	<description>Get out of my (temperate) swamp!</description>
	<hediffClass>HediffWithComps</hediffClass>
	<isBad>false</isBad>
	<stages>
	  <li>
	    <becomeVisible>false</becomeVisible>
	  </li>
	</stages>
	<comps>
	  <li Class="HautsPermits.HediffCompProperties_GetOffMyMap">
		<minDuration>120000</minDuration><!--doesn't start trying to get them to leave until 2d has elapsed-->
		<periodicity>2500</periodicity>
	  </li>
	</comps>
  </HediffDef>
  
  <!--Pawns given to you for safekeeping get this temporary implant so that you can receive them in any conditions-->
  <HediffDef ParentName="ImplantHediffBase">
    <defName>HVMP_HostileEnvironmentFilm</defName>
    <label>hostile environment film</label>
	<hediffClass>HediffWithComps</hediffClass>
    <description>A biodegradable ultratech film that protects against all manner of environmental conditions, including temperature extremes, toxic fallout, and vacuum. It breaks down after a while.</description>
	<initialSeverity>5</initialSeverity>
	<maxSeverity>5</maxSeverity>
    <stages>
      <li>
		<statOffsets>
		  <ToxicEnvironmentResistance>2</ToxicEnvironmentResistance>
		  <VacuumResistance MayRequire="Ludeon.RimWorld.Odyssey">2</VacuumResistance>
		  <ComfyTemperatureMin>-100</ComfyTemperatureMin>
		  <ComfyTemperatureMax>100</ComfyTemperatureMax>
		  <P42_AllergicSensitivity MayRequire="phil42.allergies">-2</P42_AllergicSensitivity>
		  <Mashed_Ashlands_AshResistance MayRequire="SirMashedPotato.Ashlands">2</Mashed_Ashlands_AshResistance>
		  <Radiation MayRequire="Dubwise.Rimatomics">-2</Radiation>
		</statOffsets>
		<statFactors>
		  <IncomingDamageFactor>0.5</IncomingDamageFactor>
		</statFactors>
        <totalBleedFactor>0.025</totalBleedFactor>
      </li>
    </stages>
    <comps>
	  <li Class="HediffCompProperties_SeverityPerDay">
		<severityPerDay>-1</severityPerDay>
		<showDaysToRecover>true</showDaysToRecover>
	  </li>
    </comps>
  </HediffDef>
  
  <!--Pax combat assist-->
  <HediffDef ParentName="HVT_TraitHediffBase">
    <defName>HVMP_CombatAssistProgram</defName>
    <label>pax combat assistance</label>
    <description>A radio link to an automated live combat assistance program.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(0.9333,0.5961,0.5961)</defaultLabelColor>
	<initialSeverity>1</initialSeverity>
	<maxSeverity>1</maxSeverity>
    <stages>
      <li>
		<statOffsets>
		  <ShootingAccuracyPawn>3</ShootingAccuracyPawn>
		  <MeleeHitChance>3</MeleeHitChance>
		  <MeleeDodgeChance>3</MeleeDodgeChance>
		  <VEF_VerbRangeFactor>0.2</VEF_VerbRangeFactor>
		</statOffsets>
      </li>
    </stages>
    <comps>
	  <li Class="HediffCompProperties_SeverityPerDay">
		<severityPerDay>-6</severityPerDay>
		<showDaysToRecover>true</showDaysToRecover>
	  </li>
    </comps>
  </HediffDef>
  <!--Pax scalpel-->
  <HediffDef ParentName="HVT_TraitHediffBase">
    <defName>HVMP_OrbitalScalpelMarker</defName>
    <label>pax orbital scalpel</label>
    <description>Get down, Mr. President!</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(1,0.2,0.2)</defaultLabelColor>
    <stages>
      <li>
		<becomeVisible>false</becomeVisible>
      </li>
    </stages>
    <comps>
	  <li Class="HediffCompProperties_DisappearsOnDeath"/>
	  <li Class="HautsPermits.HediffCompProperties_Flashlight"> <!--red light, neon light, stop light/everybody's got a little light under the sun-->
		<ticksDelay>60</ticksDelay>
		<impactSound>Shot_TurretSniper</impactSound>
		<mote>HVMP_DirectLineToHeaven</mote>
		<scale>1</scale>
	  </li>
    </comps>
  </HediffDef>
  
  <!--Rover caravan buffs-->
  <HediffDef ParentName="HVT_TraitHediffBase">
    <defName>HVMP_CaravanForageAura</defName>
    <label>rover route assist (foraging)</label>
    <description>While on a caravan, everyone in the caravan forages twice the amount of food.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(1,1,1)</defaultLabelColor>
	<initialSeverity>1</initialSeverity>
	<maxSeverity>1</maxSeverity>
    <comps>
      <li Class="HautsPermits.HediffCompProperties_CaravanHediffAura">
        <hediffs>
		  <li>HVMP_CaravanForage</li>
		</hediffs>
		<affectsSelf>true</affectsSelf>
		<affectsAllies>true</affectsAllies>
		<affectsHostiles>true</affectsHostiles>
      </li>
	  <li Class="HediffCompProperties_SeverityPerDay">
		<severityPerDay>-0.2</severityPerDay>
		<showDaysToRecover>true</showDaysToRecover>
	  </li>
	  <li Class="HediffCompProperties_DisappearsOnDeath"/>
    </comps>
  </HediffDef>
	  <HediffDef ParentName="HVT_TraitHediffBase">
		<defName>HVMP_CaravanForage</defName>
		<label>foraging route assist</label>
		<description>Information on best spots and practices for foraging, courtesy of real-time advisement from Rover Branch navigational services.</description>
		<hediffClass>HediffWithComps</hediffClass>
		<defaultLabelColor>(1,1,1)</defaultLabelColor>
		<initialSeverity>0.1001</initialSeverity>
		<maxSeverity>0.1001</maxSeverity>
		<stages>
		  <li>
			<statFactors>
			  <ForagedNutritionPerDay>2</ForagedNutritionPerDay>
			</statFactors>
		  </li>
		</stages>
		<comps>
		  <li Class="HediffCompProperties_SeverityPerDay">
			<severityPerDay>-24</severityPerDay>
		  </li>
		  <li Class="HediffCompProperties_DisappearsOnDeath"/>
		</comps>
	  </HediffDef>
  <HediffDef ParentName="HVT_TraitHediffBase">
	<defName>HVMP_CaravanPilfering</defName>
	<label>rover route assist (burglary)</label>
	<description>While on a caravan, this character's pilfering stealth is increased.</description>
	<hediffClass>HediffWithComps</hediffClass>
	<defaultLabelColor>(1,1,1)</defaultLabelColor>
	<minSeverity>0.001</minSeverity>
	<initialSeverity>1</initialSeverity>
	<maxSeverity>1</maxSeverity>
	<stages>
	  <li>
		<label>inactive</label>
	  </li>
	  <li>
		<minSeverity>1</minSeverity>
		<statOffsets>
		  <Hauts_PilferingStealth>0.25</Hauts_PilferingStealth>
		</statOffsets>
	  </li>
	</stages>
	<comps>
	  <li Class="HautsFramework.HediffCompProperties_OnCaravanSeverity">
		<whileOnCaravan>1</whileOnCaravan>
		<whileInMap>0.001</whileInMap>
	  </li>
      <li Class="HediffCompProperties_Disappears">
        <disappearsAfterTicks>300000</disappearsAfterTicks>
        <showRemainingTime>true</showRemainingTime>
      </li>
	  <li Class="HediffCompProperties_DisappearsOnDeath"/>
	</comps>
  </HediffDef>
  <HediffDef ParentName="HVT_TraitHediffBase">
    <defName>HVMP_CaravanComfortAura</defName>
    <label>rover route assist (comfort)</label>
    <description>While on a caravan, everyone in the caravan rests easier, feels better, and gets bored slower.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(1,1,1)</defaultLabelColor>
	<initialSeverity>1</initialSeverity>
	<maxSeverity>1</maxSeverity>
    <comps>
      <li Class="HautsPermits.HediffCompProperties_CaravanHediffAura">
        <hediffs>
		  <li>HVMP_CaravanComfort</li>
		</hediffs>
		<affectsSelf>true</affectsSelf>
		<affectsAllies>true</affectsAllies>
		<affectsHostiles>true</affectsHostiles>
      </li>
	  <li Class="HediffCompProperties_SeverityPerDay">
		<severityPerDay>-0.2</severityPerDay>
		<showDaysToRecover>true</showDaysToRecover>
	  </li>
	  <li Class="HediffCompProperties_DisappearsOnDeath"/>
    </comps>
  </HediffDef>
	  <HediffDef ParentName="HVT_TraitHediffBase">
		<defName>HVMP_CaravanComfort</defName>
		<label>comforting route assist</label>
		<description>Access to a plethora of radio chanenls for the road, courtesy of Rover Branch navigational services.</description>
		<hediffClass>HediffWithComps</hediffClass>
		<defaultLabelColor>(1,1,1)</defaultLabelColor>
		<initialSeverity>0.1001</initialSeverity>
		<maxSeverity>0.1001</maxSeverity>
		<stages>
		  <li>
			<statFactors>
			  <JoyFallRateFactor>0.5</JoyFallRateFactor>
			  <RestRateMultiplier>1.25</RestRateMultiplier>
			</statFactors>
			<statOffsets>
			  <Hauts_BoredomDropPerDay>0.04</Hauts_BoredomDropPerDay>
			</statOffsets>
		  </li>
		</stages>
		<comps>
		  <li Class="HediffCompProperties_SeverityPerDay">
			<severityPerDay>-24</severityPerDay>
		  </li>
		  <li Class="HediffCompProperties_DisappearsOnDeath"/>
		</comps>
	  </HediffDef>
  <HediffDef ParentName="HVT_TraitHediffBase">
    <defName>HVMP_CaravanStealthAura</defName>
    <label>rover route assist (stealth)</label>
    <description>While on a caravan, its visibility is reduced to a twentieth its normal value.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(1,1,1)</defaultLabelColor>
	<initialSeverity>1</initialSeverity>
	<maxSeverity>1</maxSeverity>
    <comps>
      <li Class="HautsPermits.HediffCompProperties_CaravanHediffAura">
        <hediffs>
		  <li>HVMP_CaravanStealth</li>
		</hediffs>
		<affectsSelf>true</affectsSelf>
		<affectsAllies>true</affectsAllies>
		<affectsHostiles>true</affectsHostiles>
      </li>
	  <li Class="HediffCompProperties_SeverityPerDay">
		<severityPerDay>-0.2</severityPerDay>
		<showDaysToRecover>true</showDaysToRecover>
	  </li>
	  <li Class="HediffCompProperties_DisappearsOnDeath"/>
    </comps>
  </HediffDef>
	  <HediffDef ParentName="HVT_TraitHediffBase">
		<defName>HVMP_CaravanStealth</defName>
		<label>concealing route assist</label>
		<description>Following a route optimized for evading detection, courtesy of real-time advisement from Rover Branch navigational services.</description>
		<hediffClass>HediffWithComps</hediffClass>
		<defaultLabelColor>(1,1,1)</defaultLabelColor>
		<initialSeverity>0.1001</initialSeverity>
		<maxSeverity>0.1001</maxSeverity>
		<stages>
		  <li>
			<statOffsets>
			  <Hauts_PersonalCaravanVisibilityFactor>-0.95</Hauts_PersonalCaravanVisibilityFactor>
			</statOffsets>
		  </li>
		</stages>
		<comps>
		  <li Class="HediffCompProperties_SeverityPerDay">
			<severityPerDay>-24</severityPerDay>
		  </li>
		  <li Class="HediffCompProperties_DisappearsOnDeath"/>
		</comps>
	  </HediffDef>
  <HediffDef ParentName="HVT_TraitHediffBase">
	<defName>HVMP_CaravanSpeed</defName>
	<label>rover route assist (speed)</label>
	<description>While on a caravan, this character's speed is increased.</description>
	<hediffClass>HediffWithComps</hediffClass>
	<defaultLabelColor>(1,1,1)</defaultLabelColor>
	<initialSeverity>1</initialSeverity>
	<maxSeverity>1</maxSeverity>
	<stages>
	  <li>
		<statOffsets>
		  <CaravanBonusSpeedFactor>0.2</CaravanBonusSpeedFactor>
		</statOffsets>
	  </li>
	</stages>
	<comps>
	  <li Class="HediffCompProperties_SeverityPerDay">
		<severityPerDay>-0.2</severityPerDay>
	  </li>
	  <li Class="HediffCompProperties_DisappearsOnDeath"/>
	</comps>
  </HediffDef>
	  
	  
  <!--important for Odyssey-exclusive e-branch platform raid rewards, and for certain hard mode quests-->
  <HediffDef ParentName="HVT_TraitHediffBase">
	<defName>HVMP_BShield</defName>
	<hediffClass>HautsFramework.Hediff_PreDamageModification</hediffClass>
	<label>blackbody shield</label>
	<description>A projectile-repulsion field generated by a very powerful one-use shield generator. Its own energy depletes over time, and it inhibits the user's movement and sight, but it can block any kind of damage and resists EMPs.</description>
	<initialSeverity>0.001</initialSeverity>
	<stages>
	  <li>
		<capMods>
          <li>
            <capacity>Moving</capacity>
            <postFactor>0.8</postFactor>
          </li>
          <li>
            <capacity>Sight</capacity>
            <postFactor>0.8</postFactor>
          </li>
          <li>
            <capacity>Hearing</capacity>
            <postFactor>0.8</postFactor>
          </li>
        </capMods>
	  </li>
	</stages>
	<comps>
	  <li Class="HautsFramework.HediffCompProperties_DamageNegationShield">
		<chance>1</chance>
		<severityOnHit>-1</severityOnHit>
		<minSeverityToWork>0.001</minSeverityToWork>
		<damageScalesSeverityLoss>true</damageScalesSeverityLoss>
		<soundOnBlock>EnergyShield_AbsorbDamage</soundOnBlock>
		<fleckOnBlock>ExplosionFlash</fleckOnBlock>
		<destroyIfOverwhelmed>true</destroyIfOverwhelmed><!--once depleted, it's gone-->
		<energyOnReset>400</energyOnReset><!--however, it should start at full strength-->
		<baseEnergyRechargeRate>-1</baseEnergyRechargeRate>
		<baseMaxEnergy>400</baseMaxEnergy>
		<maxEnergyScalar>VEF_EnergyShieldEnergyMaxFactor</maxEnergyScalar>
		<breakEffect>Shield_Break</breakEffect>
		<reactsToShieldBypassers>true</reactsToShieldBypassers>
		<visualRange>1.2~1.5</visualRange>
		<priority>9995</priority>
		<reactsToOther>true</reactsToOther>
		<shouldUseIncomingDamageFactor>false</shouldUseIncomingDamageFactor>
		<noCostIfInvincible>false</noCostIfInvincible>
	  </li>
	  <li Class="HautsFramework.HediffCompProperties_MoteConditionalShield">
		<mote>HVMP_BShieldGraphic</mote>
		<scale>1</scale>
		<minDrawFactor>1.2</minDrawFactor>
		<maxDrawFactor>1.5</maxDrawFactor>
		<randomRotation>true</randomRotation>
		<validRange>0.001~9999999</validRange>
	  </li>
      <li Class="HediffCompProperties_Disappears">
        <disappearsAfterTicks>2500</disappearsAfterTicks>
        <showRemainingTime>true</showRemainingTime>
      </li>
	  <li Class="HediffCompProperties_DisappearsOnDeath"/>
	</comps>
  </HediffDef>
	  <ThingDef ParentName="MoteGlowDistorted">
		<defName>HVMP_BShieldGraphic</defName>
		<thingClass>MoteAttached</thingClass>
		<altitudeLayer>Projectile</altitudeLayer>
		<mote>
		  <fadeInTime>0.001</fadeInTime>
		  <fadeOutTime>0.001</fadeOutTime>
		  <solidTime>9999</solidTime>
		  <!--<realTime>true</realTime>-->
		  <needsMaintenance>true</needsMaintenance>
		</mote>
		<graphicData>
		  <graphicClass>Graphic_Mote</graphicClass>
		  <texPath>Other/ShieldBubble</texPath>
		  <shaderType>Transparent</shaderType>
		  <color>(1,0.4353,0.45,1)</color>
		  <drawSize>1</drawSize>
		  <shaderParameters>
			<_DistortionTex>/Other/Ripples</_DistortionTex>
			<_distortionIntensity>0.7</_distortionIntensity>
			<_DistortionScale>0.5</_DistortionScale>
			<_distortionScrollSpeed>(0.17, 0.17, 0.0)</_distortionScrollSpeed>
		  </shaderParameters>
		</graphicData>
	  </ThingDef>
  <HediffDef ParentName="HVT_TraitHediffBase">
	<defName>HVMP_Gatepuncher_NPC</defName>
	<label>jailbroken gatepuncher</label>
    <labelNoun>a jailbroken gatepuncher</labelNoun>
    <defaultLabelColor>(0.6, 0.6, 1.0)</defaultLabelColor>
	<description>A bionic link to a field of skipgates. Enables the use of Personal Skip up to four times.</description>
	<initialSeverity>4</initialSeverity>
	<maxSeverity>4</maxSeverity>
	<stages>
	  <li>
		<label>1 use</label>
	  </li>
	  <li>
		<minSeverity>1.001</minSeverity>
		<label>2 uses</label>
	  </li>
	  <li>
		<minSeverity>2.001</minSeverity>
		<label>3 uses</label>
	  </li>
	  <li>
		<minSeverity>3.001</minSeverity>
		<label>4 uses</label>
	  </li>
	</stages>
    <descriptionHyperlinks><ThingDef>HVMP_Gatepuncher</ThingDef></descriptionHyperlinks>
    <abilities>
      <li>HVMP_GatepunchSkip_NPC</li>
    </abilities>
  </HediffDef>
	  <AbilityDef>
		<defName>HVMP_GatepunchSkip_NPC</defName>
		<label>personal skip</label>
		<description>Teleport to a desired position not too far away. Can target positions outside line of sight.\n\nCan be used four times before the gatepuncher breaks down.</description>
		<category>Skip</category>
		<iconPath>UI/Abilities/Skip</iconPath>
		<aiCanUse>true</aiCanUse>
		<statBases>
		  <Ability_Duration>0</Ability_Duration>
		</statBases>
		<warmupSound>PsycastCastLoop</warmupSound>
		<cooldownTicksRange>240</cooldownTicksRange>
		<writeCombatLog>True</writeCombatLog>
		<showPsycastEffects>False</showPsycastEffects>
		<verbProperties>
		  <verbClass>Verb_CastAbility</verbClass>
		  <violent>false</violent>
		  <forceNormalTimeSpeed>false</forceNormalTimeSpeed>
		  <warmupTime>0.25</warmupTime>
		  <range>19.9</range>
		  <requireLineOfSight>False</requireLineOfSight>
		  <targetParams>
			<canTargetLocations>true</canTargetLocations>
			<canTargetPawns>false</canTargetPawns>
			<canTargetBuildings>false</canTargetBuildings>
		  </targetParams>
		</verbProperties>
		<casterMustBeCapableOfViolence>false</casterMustBeCapableOfViolence>
		<comps>
		  <li Class = "HautsFramework.CompProperties_AbilityTeleportSelf">
			<compClass>HautsFramework.CompAbilityEffect_TeleportSelf</compClass>
			<requiresLineOfSight>False</requiresLineOfSight>
			<clamorType>Ability</clamorType>
			<clamorRadius>10</clamorRadius>
			<destClamorType>Ability</destClamorType>
			<destClamorRadius>10</destClamorRadius>
			<stunTicks>18~60</stunTicks>
		  </li>
		  <li Class="HautsFramework.CompProperties_AbilityAiTargetingDistanceRange">
			<compClass>HautsFramework.CompAbilityEffect_AiTargetingDistanceRange</compClass>
			<distanceRange>4.5~99999</distanceRange>
			<mustBeMelee>true</mustBeMelee>
		  </li>
		  <li Class="HautsFramework.CompProperties_AbilityAiUsesToRetreat">
			<compClass>HautsFramework.CompAbilityEffect_AiUsesToRetreat</compClass>
			<hpThreshold>0.2</hpThreshold>
			<mustBeRanged>true</mustBeRanged>
		  </li>
		  <li Class="HautsPermits.CompProperties_GatepunchAbility">
			<compClass>HautsPermits.CompAbilityEffect_GatepunchAbility</compClass>
			<gatepuncherHediff>HVMP_Gatepuncher_NPC</gatepuncherHediff>
			<chargeCost>1</chargeCost>
		  </li>
		</comps>
	  </AbilityDef>
  
</Defs>