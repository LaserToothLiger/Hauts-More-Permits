<?xml version="1.0" encoding="utf-8" ?>
<Patch>
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Ideology</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationFindMod">
					<mods>
						<li>Biotech</li>
					</mods>
					<match Class="PatchOperationSequence">
						<operations><!--hacking speed instead of research speed for Retroviral Agent quests-->
							<li Class="PatchOperationReplace">
								<xpath>/Defs/ThingDef[defName="HVMP_RetroviralPackage"]/comps/li[@Class="HautsPermits.CompProperties_StudiableQuestItem"]/requiredStatDefs</xpath>
								<value>
									<requiredStatDefs><li>HackingSpeed</li></requiredStatDefs>
								</value>
							</li>
						</operations>
					</match>
				</li>
				<!--crashed shuttles send a signal pertinent to Entrant quests. we can't just use the "Destroyed" signal because that procs when the site/map the shuttle is in is discarded, and so procs when the quest's timer is up, causing you to succeed instead of fail-->
				<li Class="PatchOperationConditional">
					<xpath>/Defs/ThingDef[defName="ShuttleCrashed"]/comps</xpath>
					<nomatch Class="PatchOperationAdd">
						<xpath>/Defs/ThingDef[defName="ShuttleCrashed"]</xpath>
						<value>
							<comps Inherit="False">
								<li Class="HautsPermits_Ideology.CompProperties_Icarus" />
							</comps>
						</value>
					</nomatch>
					<match Class="PatchOperationAdd">
						<xpath>/Defs/ThingDef[defName="ShuttleCrashed"]/comps</xpath>
						<value>
							<li Class="HautsPermits_Ideology.CompProperties_Icarus" />
						</value>
					</match>
				</li>
			</operations>
		</match>
	</Operation>
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Anomaly</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations><!--containment platforms should be able to benefit from electric inhibitors-->
				<li Class="PatchOperationAdd">
					<xpath>/Defs/ThingDef[@Name="HoldingPlatformBase"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
					<value>
						<li>HVMP_EltexInhibitor</li>
					</value>
				</li><!--eltex beacons for psy ritual spots-->
				<li Class="PatchOperationAdd">
					<xpath>/Defs/ThingDef[defName="PsychicRitualSpot"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
					<value>
						<li>HVMP_EltexBeacon</li>
					</value>
				</li>
			</operations>
		</match>
	</Operation>
</Patch>